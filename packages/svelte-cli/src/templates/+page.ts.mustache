/**
 * * This file was automatically generated by ruest-svelte-cli.
 * * If you modify it by hand, IT WILL NOT BE REGENERATED. If you wish to regenerate the file
 * * please remove it before rerunning ruest-svelte-cli.
 * */
import { error } from '@sveltejs/kit';
import type { PageLoad } from './$types';

export const load: PageLoad = async ({ fetch, params }) => {
	const url = new URL(params.path, import.meta.env.VITE_RUEST_SERVER ?? "http://localhost:8080")
	console.log(`Load URL: ${url.toString()}`);
	const res = await fetch(url);

	if (!res.ok) {
		error(res.status, res.statusText)
	}

	const item = await res.json();
	return {
		item,
		contentType: res.headers.get('content-type') ?? 'unknown',
	};
};